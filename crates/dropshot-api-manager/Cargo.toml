[package]
name = "dropshot-api-manager"
version = "0.1.1"
description = "Manage OpenAPI documents generated by Dropshot"
edition.workspace = true
license.workspace = true
repository.workspace = true
rust-version.workspace = true
readme = "README.md"
documentation = "https://docs.rs/dropshot-api-manager"

[dependencies]
anyhow.workspace = true
atomicwrites.workspace = true
camino.workspace = true
clap = { workspace = true, features = ["cargo", "derive", "env"] }
debug-ignore.workspace = true
dropshot.workspace = true
fs-err.workspace = true
hex.workspace = true
indent_write.workspace = true
newtype_derive.workspace = true
dropshot-api-manager-types.workspace = true
openapiv3 = { workspace = true, features = ["skip_serializing_defaults"] }
owo-colors.workspace = true
paste.workspace = true
semver.workspace = true
serde_json.workspace = true
sha2.workspace = true
similar = { workspace = true, features = ["bytes"] }
supports-color.workspace = true
textwrap = { workspace = true, features = ["terminal_size"] }
thiserror.workspace = true

[dev-dependencies]
assert_matches.workspace = true

[lints]
workspace = true

[package.metadata.release]
pre-release-replacements = [
    { file="CHANGELOG.md", search="Unreleased", replace="[{{version}}]", min=1 },
    { file="CHANGELOG.md", search="ReleaseDate", replace="{{date}}", min=1 },
    { file="CHANGELOG.md", search="<!-- next-header -->", replace="<!-- next-header -->\n## Unreleased - ReleaseDate\n", exactly=1 },
    { file="CHANGELOG.md", search="<!-- next-url -->", replace="<!-- next-url -->\n[{{version}}]: https://github.com/oxidecomputer/dropshot-api-manager/releases/tag/dropshot-api-manager-{{version}}", exactly=1},
]
